<import src="../../style/footer.wxml" />
<image class="toWrite" bindtap="toAddDiary" src="../../images/teacher_publish_icon.png"></image>
<view class="page">
  <include src="../../toast_foot.wxml"/>
  <scroll-view lower-threshold="800" bindscrolltolower="pullUpLoad" upper-threshold="0" scroll-y="true">
    <view class="page__bd">
      <view class="weui-panel">
        <view class="weui-panel__hd">亲爱的，你的课程</view>
        <view class="weui-panel__bd">
<block wx:if="{{diaryList.length>0}}">
          <navigator class="weui-media-box weui-media-box_text" wx:for="{{diaryList}}" url="/pages/index/detail/index?objectId={{item.objectId}}">
          <view class='page_item'>
            <view class="weui-media-box__title weui-media-box__title_in-text">
              课堂名称：{{item.class_name}}</view>
            <view class="weui-media-box__desc">教师：{{item.teacher_name}}</view>
            <view class="weui-media-box__info">
              <view class="weui-media-box__info__meta weui-media-time">开始时间：{{item.start_time}}</view>
              <view class="weui-media-box__info__meta weui-media-time">结束时间：{{item.end_time}}</view>
              <view class="weui-media-box__info__meta weui-media-box__info__operate">
                <icon type="cancel dels" size="16"></icon>
                <text class="del" catchtap="deleteDiary" data-id="{{item.objectId}}">删除</text>
                <icon type="success edits" size="16"></icon>
                <text catchtap="toModifyDiary" data-id="{{item.objectId}}" data-content="{{item.content}}" data-title="{{item.title}}">编辑</text>
              </view>
            </view>
          </view>
          </navigator>
</block>
<block wx:else>
           <view class="weui-media-box weui-media-box_text">
            <view class="weui-media-box__title weui-media-box__title_in-text">
             暂无内容，请点击右下角添加</view>
            <view class="weui-media-box__desc"></view>

          </view>
</block>

        </view>
      </view>
    </view>
  </scroll-view>
</view>
<view class="js_dialog" id="androidDialog1" style="opacity: 1;" wx:if="{{writeDiary}}">
  <view class="weui-mask"></view>
  <view class="weui-dialog">
    <view class="weui-dialog__hd"><strong class="weui-dialog__title">发布课程</strong></view>
    <form bindsubmit="addClassMsg" report-submit="true">
      <view class="weui-dialog__bd">
        <view class="weui-cells__title">标题</view>
        <view class="weui-cells weui-cells_after-title">
          <view class="weui-cell weui-cell_input">
            <view class="weui-cell__bd">
              <input class="weui-input" name="title" placeholder="请输课程名称" />
            </view>
          </view>
        </view>
        <view class="weui-cells__title">课程时间</view>
       <view class="weui-cells weui-cells_after-title">
          <view class="weui-cell weui-cell_input">
            <view class="weui-cell__bd">
              <input class="weui-input" name="class_start_time" placeholder="请输课程开始时间" value='{{startTime}}' bindtap='pickerShow' />
            </view>
          </view>
        </view>
        <view class="weui-cells weui-cells_after-title">
          <view class="weui-cell weui-cell_input">
            <view class="weui-cell__bd">
              <input class="weui-input" name="class_end_time" placeholder="请输课程结束时间" value='{{endTime}}' bindtap='pickerShow'/>
            </view>
          </view>
        </view>
      </view>
      <view class="weui-dialog__ft">
        <button class="weui-dialog__btn weui-dialog__btn_primary" formType="submit">提交</button>
        <button class="weui-dialog__btn weui-dialog__btn_primary" bindtap='closeLayer'>取消</button>
      </view>
    </form>
  </view>
</view>
<view class="js_dialog" id="androidDialog2" style="opacity: 1;" wx:if="{{modifyDiarys}}">
  <view class="weui-mask"></view>
  <view class="weui-dialog weui-skin_android">
    <view class="weui-dialog__hd"><strong class="weui-dialog__title">修改日记</strong>  </view>
    <form bindsubmit="modifyDiary">
      <view class="weui-dialog__bd">
        <view class="weui-cells__title">标题</view>
        <view class="weui-cells weui-cells_after-title">
          <view class="weui-cell weui-cell_input">
            <view class="weui-cell__bd">
              <input class="weui-input" name="title" value="{{nowTitle}}" placeholder="请输入标题" />
            </view>
          </view>
        </view>
        <view class="weui-cells__title">日记内容</view>
        <view class="weui-cells weui-cells_after-title">
          <view class="weui-cell">
            <view class="weui-cell__bd">
              <textarea class="weui-textarea" name="content" value="{{nowContent}}" placeholder="请输入日记内容" style="height: 3.3em" />
              <view class="weui-textarea-counter">0/200</view>
            </view>
          </view>
        </view>
      </view>
      <view class="weui-dialog__ft">
        <view class="weui-dialog__btn weui-dialog__btn_default" bindtap="noneWindows">取消</view>
        <button loading="{{loading}}" class="weui-dialog__btn weui-dialog__btn_primary" formType="submit">提交</button>
      </view>
    </form>
  </view>
</view>

<timePicker pickerShow="{{isPickerShow}}" id="picker" wx:if="{{isPickerRender}}" bind:hidePicker="pickerHide" bind:setPickerTime="setPickerTime"
  config="{{pickerConfig}}"></timePicker>